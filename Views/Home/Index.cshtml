@{
    ViewData["Title"] = "Clientes – Práctica Programada 4";
}


<div class="container py-4 animate-page">
    <h1 class="page-title-glow-black">Gestión de Clientes</h1>

    <div id="alertGlobal" class="alert d-none" role="alert"></div>

    <div class="row g-4">
        <!-- Listado -->
        <div class="col-lg-6">
            <div class="card shadow-lg elegant-card animate-section">
                <div class="card-header bg-gradient-primary text-white fw-semibold">
                    <i class="bi bi-people-fill me-2"></i> Listado de Clientes
                </div>
                <div class="card-body" id="zonaListado">
                    <div class="loading-box">
                        <div class="spinner-border" role="status"></div>
                        <p class="mt-2">Cargando listado…</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Insertar + Actualizar -->
        <div class="col-lg-6">
            <!-- Insertar -->
            <div class="card shadow-lg elegant-card mb-4 animate-section">
                <div class="card-header bg-gradient-success text-white fw-semibold">
                    <i class="bi bi-person-plus-fill me-2"></i> Insertar Cliente
                </div>
                <div class="card-body" id="zonaInsertar">
                    <div class="loading-box">
                        <div class="spinner-border" role="status"></div>
                        <p class="mt-2">Cargando formulario…</p>
                    </div>
                </div>
            </div>

            <!-- Actualizar / Eliminar -->
            <div class="card shadow-lg elegant-card animate-section">
                <div class="card-header bg-gradient-warning text-white fw-semibold">
                    <i class="bi bi-pencil-square me-2"></i> Actualizar / Eliminar
                </div>
                <div class="card-body" id="zonaActualizarEliminar">
                    <div class="loading-box">
                        <div class="spinner-border" role="status"></div>
                        <p class="mt-2">Cargando formulario…</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/clientes.js" asp-append-version="true"></script>
    <script>
        document.addEventListener('click', function (e) {//listener para los clicks

            const btn = e.target.closest('.js-id-click');//busca si se le da click al id
            if (!btn) return;//si no se le da click a un id, para el script

            //Lee los atributos del cliente al que se le dio click
            const id = btn.dataset.id || '';
            const nombre = btn.dataset.nombre || '';
            const edad = btn.dataset.edad || '';
            const ciudad = btn.dataset.ciudad || '';

            //actualizar
            const txtIdAct = document.getElementById('txtIdActualizar');
            const txtNomAct = document.getElementById('txtNombreActualizar');
            const txtEdadAct = document.getElementById('txtEdadActualizar');
            const txtCiuAct = document.getElementById('txtCiudadActualizar');

            //toma los atributos que guardo y llena el form de actualizar
            if (txtIdAct) txtIdAct.value = id;
            if (txtNomAct) txtNomAct.value = nombre;
            if (txtEdadAct) txtEdadAct.value = edad;
            if (txtCiuAct) txtCiuAct.value = ciudad;

            //para resaltar el campo del id que se rellena
            if (txtIdAct) txtIdAct.focus();

            //eliminar
            const txtIdDel = document.getElementById('txtIdEliminar');
            if (txtIdDel) txtIdDel.value = id;
        });
    </script>
}







